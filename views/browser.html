<!DOCTYPE html>
<html theme="default">
<meta charset="utf-8" />

<head>
	<script src="https://apis.google.com/js/api.js"></script>
	<title>xTickets</title>
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="manifest" href="/manifest.json">
	<link href="styles.css" type="text/css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700|Roboto:100,300,400|Indie+Flower:400" rel="stylesheet">
	<script src="https://apis.google.com/js/platform.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>
		SockIO = io();
		var connected = false;
		SockIO.on('connect', function () {
			if (connected) location.reload();
			connected = true;
			SockIO.emit('message', JSON.stringify({ Cmd: 'GetConfig', Path: location.pathname.substr(1).toLowerCase() }));
		});
		SockIO.on('disconnect', function () {
			$('.showOnDisconnect').css('display', 'inline');
		});
		SockIO.on('message', function (data) {
			var com = JSON.parse(data);
			if (com.Error == 404) {
				document.getElementsByClassName("showOn404")[0].style.display = 'inline';
				document.getElementsByClassName('removeOnLoad')[0].style.display = 'none';
				return;
			}
			eval(com.Nxs);
			__Nexus.boot(SockIO, com);
		});
		(async _ => {
			return new Promise((resolve, reject) => {
				// debugger;
				let cookies = document.cookie.split(';').map(v => v.split('='));
				for (let cookie of cookies) {
					let [key, val] = cookie;
					key = key.trim();
					if (key == 'themeName') document.getElementsByTagName('html')[0].setAttribute('class', val.trim());
				}
				document.cookie = `themeName=${document.getElementsByTagName('html')[0].getAttribute('class') || 'casco'}`;
			});


		})();
	</script>
</head>

<body id="Body" style="height:100vh;margin:0px" oncontextmenu="return false;">

	<!-- This will be shown on disconnect -->
	<div style="
			position: fixed;
			display: none;
			top: -6px;
			left: -8px;
			z-index: 100000;
			padding: 16px;
			padding-bottom: 12px;
			padding-right: 20px;
			border: 1px solid black;
			background-color: white;
			border-radius: 5px;
	" class="showOnDisconnect">Server Connection Lost
		<br>Trying to reconnect . . .
	</div>

	<!-- This will be shown if the Server responds with com.Error == 404 -->
	<div class="showOn404" style="display:none;">
		<div style="width: 250px; font-family: sans-serif;
	  margin: 0px auto; position: relative; z-index: 1;
	  margin-top: 32px;">
			<span style="font-size: 48px">404</span><br>
			<span>Page not Found</span><br><br><hr><br>
			<div style="text-align: right;">
				<a href="#" onclick="history.back()" style="text-decoration: none;">&lt;&lt; Go Back</a>
			</div>
		</div>
	</div>

	<!-- This will be shown until we get a response -->
	<div class="removeOnLoad">Loading Views...</div>

	<!--  -->
</body>

</html>