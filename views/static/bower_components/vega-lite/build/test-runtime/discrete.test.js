"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var chai_1 = require("chai");
var util_1 = require("./util");
['single', 'multi'].forEach(function (type) {
    describe(type + " selections at runtime in unit views", function () {
        var hits = util_1.hits.discrete;
        var embed = util_1.embedFn(browser);
        var testRender = util_1.testRenderFn(browser, type + "/unit");
        it('should add values to the store', function () {
            for (var i = 0; i < hits.qq.length; i++) {
                embed(util_1.spec('unit', i, { type: type }));
                var store = browser.execute(util_1.pt('qq', i)).value;
                chai_1.assert.lengthOf(store, 1);
                chai_1.assert.lengthOf(store[0].encodings, 0);
                chai_1.assert.lengthOf(store[0].fields, 1);
                chai_1.assert.lengthOf(store[0].values, 1);
                testRender("click_" + i);
            }
        });
        it('should respect projections', function () {
            var values = [];
            var encodings = [];
            var fields = [];
            var test = function (emb) {
                for (var i = 0; i < hits.qq.length; i++) {
                    emb(i);
                    var store = browser.execute(util_1.pt('qq', i)).value;
                    chai_1.assert.lengthOf(store, 1);
                    chai_1.assert.deepEqual(store[0].encodings, encodings);
                    chai_1.assert.deepEqual(store[0].fields, fields);
                    chai_1.assert.deepEqual(store[0].values, values[i]);
                    testRender(encodings + "_" + fields + "_" + i);
                }
            };
            encodings = ['x', 'color'];
            fields = ['a', 'c'];
            values = [[2, 1], [6, 0]];
            test(function (i) { return embed(util_1.spec('unit', i, { type: type, encodings: encodings })); });
            encodings = [];
            fields = ['c', 'a', 'b'];
            values = [[1, 2, 53], [0, 6, 87]];
            test(function (i) { return embed(util_1.spec('unit', i, { type: type, fields: fields })); });
        });
        it('should clear out the store', function () {
            for (var i = 0; i < hits.qq_clear.length; i++) {
                embed(util_1.spec('unit', i, { type: type }));
                var store = browser.execute(util_1.pt('qq', i)).value;
                chai_1.assert.lengthOf(store, 1);
                store = browser.execute(util_1.pt('qq_clear', i)).value;
                chai_1.assert.lengthOf(store, 0);
                testRender("clear_" + i);
            }
        });
        it('should support selecting bins', function () {
            var encodings = ['x', 'color', 'y'];
            var fields = ['a', 'c', 'b'];
            var values = [[[1, 2], 0, [40, 50]], [[8, 9], 1, [10, 20]]];
            for (var i = 0; i < hits.bins.length; i++) {
                embed(util_1.spec('unit', i, { type: type, encodings: encodings }, { x: { bin: true }, y: { bin: true } }));
                var store = browser.execute(util_1.pt('bins', i)).value;
                chai_1.assert.lengthOf(store, 1);
                chai_1.assert.sameMembers(store[0].encodings, encodings);
                chai_1.assert.sameMembers(store[0].fields, fields);
                chai_1.assert.sameDeepMembers(store[0].values, values[i]);
                chai_1.assert.property(store[0], 'bin_a');
                chai_1.assert.property(store[0], 'bin_b');
                chai_1.assert.notProperty(store[0], 'bin_c');
                testRender("bins_" + i);
            }
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGlzY3JldGUudGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3Rlc3QtcnVudGltZS9kaXNjcmV0ZS50ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNkJBQTRCO0FBQzVCLCtCQUEyRTtBQUUzRSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBUyxJQUFJO0lBQ3ZDLFFBQVEsQ0FBSSxJQUFJLHlDQUFzQyxFQUFFO1FBQ3RELElBQU0sSUFBSSxHQUFHLFdBQVUsQ0FBQyxRQUFRLENBQUM7UUFDakMsSUFBTSxLQUFLLEdBQUcsY0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQy9CLElBQU0sVUFBVSxHQUFHLG1CQUFZLENBQUMsT0FBTyxFQUFLLElBQUksVUFBTyxDQUFDLENBQUM7UUFFekQsRUFBRSxDQUFDLGdDQUFnQyxFQUFFO1lBQ25DLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDeEMsS0FBSyxDQUFDLFdBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUMsSUFBSSxNQUFBLEVBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQy9CLElBQU0sS0FBSyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsU0FBRSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDakQsYUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7Z0JBQzFCLGFBQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDdkMsYUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FB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R0FBRyxFQUFFLElBQUksRUFBQyxFQUFFLENBQUMsRUFBRSxFQUFDLEdBQUcsRUFBRSxJQUFJLEVBQUMsRUFBQyxDQUFDLENBQUMsQ0FBQztnQkFDNUUsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxTQUFFLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO2dCQUNuRCxhQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDMUIsYUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO2dCQUNsRCxhQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7Z0JBQzVDLGFBQU0sQ0FBQyxlQUFlLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDbkQsYUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUM7Z0JBQ25DLGFBQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO2dCQUNuQyxhQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQztnQkFDdEMsVUFBVSxDQUFDLFVBQVEsQ0FBRyxDQUFDLENBQUM7WUFDMUIsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YXNzZXJ0fSBmcm9tICdjaGFpJztcbmltcG9ydCB7ZW1iZWRGbiwgaGl0cyBhcyBoaXRzTWFzdGVyLCBwdCwgc3BlYywgdGVzdFJlbmRlckZufSBmcm9tICcuL3V0aWwnO1xuXG5bJ3NpbmdsZScsICdtdWx0aSddLmZvckVhY2goZnVuY3Rpb24odHlwZSkge1xuICBkZXNjcmliZShgJHt0eXBlfSBzZWxlY3Rpb25zIGF0IHJ1bnRpbWUgaW4gdW5pdCB2aWV3c2AsIGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IGhpdHMgPSBoaXRzTWFzdGVyLmRpc2NyZXRlO1xuICAgIGNvbnN0IGVtYmVkID0gZW1iZWRGbihicm93c2VyKTtcbiAgICBjb25zdCB0ZXN0UmVuZGVyID0gdGVzdFJlbmRlckZuKGJyb3dzZXIsIGAke3R5cGV9L3VuaXRgKTtcblxuICAgIGl0KCdzaG91bGQgYWRkIHZhbHVlcyB0byB0aGUgc3RvcmUnLCBmdW5jdGlvbigpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGl0cy5xcS5sZW5ndGg7IGkrKykge1xuICAgICAgICBlbWJlZChzcGVjKCd1bml0JywgaSwge3R5cGV9KSk7XG4gICAgICAgIGNvbnN0IHN0b3JlID0gYnJvd3Nlci5leGVjdXRlKHB0KCdxcScsIGkpKS52YWx1ZTtcbiAgICAgICAgYXNzZXJ0Lmxlbmd0aE9mKHN0b3JlLCAxKTtcbiAgICAgICAgYXNzZXJ0Lmxlbmd0aE9mKHN0b3JlWzBdLmVuY29kaW5ncywgMCk7XG4gICAgICAgIGFzc2VydC5sZW5ndGhPZihzdG9yZVswXS5maWVsZHMsIDEpO1xuICAgICAgICBhc3NlcnQubGVuZ3RoT2Yoc3RvcmVbMF0udmFsdWVzLCAxKTtcbiAgICAgICAgdGVzdFJlbmRlcihgY2xpY2tfJHtpfWApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXNwZWN0IHByb2plY3Rpb25zJywgZnVuY3Rpb24oKSB7XG4gICAgICBsZXQgdmFsdWVzOm51bWJlcltdW10gPSBbXTtcbiAgICAgIGxldCBlbmNvZGluZ3M6IHN0cmluZ1tdID0gW107XG4gICAgICBsZXQgZmllbGRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgY29uc3QgdGVzdCA9IChlbWI6IEZ1bmN0aW9uKSA9PiB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGl0cy5xcS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGVtYihpKTtcbiAgICAgICAgICBjb25zdCBzdG9yZSA9IGJyb3dzZXIuZXhlY3V0ZShwdCgncXEnLCBpKSkudmFsdWU7XG4gICAgICAgICAgYXNzZXJ0Lmxlbmd0aE9mKHN0b3JlLCAxKTtcbiAgICAgICAgICBhc3NlcnQuZGVlcEVxdWFsKHN0b3JlWzBdLmVuY29kaW5ncywgZW5jb2RpbmdzKTtcbiAgICAgICAgICBhc3NlcnQuZGVlcEVxdWFsKHN0b3JlWzBdLmZpZWxkcywgZmllbGRzKTtcbiAgICAgICAgICBhc3NlcnQuZGVlcEVxdWFsKHN0b3JlWzBdLnZhbHVlcywgdmFsdWVzW2ldKTtcbiAgICAgICAgICB0ZXN0UmVuZGVyKGAke2VuY29kaW5nc31fJHtmaWVsZHN9XyR7aX1gKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgZW5jb2RpbmdzID0gWyd4JywgJ2NvbG9yJ107XG4gICAgICBmaWVsZHMgPSBbJ2EnLCAnYyddO1xuICAgICAgdmFsdWVzID0gW1syLCAxXSwgWzYsIDBdXTtcbiAgICAgIHRlc3QoKGk6IG51bWJlcikgPT4gZW1iZWQoc3BlYygndW5pdCcsIGksIHt0eXBlLCBlbmNvZGluZ3N9KSkpO1xuXG4gICAgICBlbmNvZGluZ3MgPSBbXTtcbiAgICAgIGZpZWxkcyA9IFsnYycsICdhJywgJ2InXTtcbiAgICAgIHZhbHVlcyA9IFtbMSwgMiwgNTNdLCBbMCwgNiwgODddXTtcbiAgICAgIHRlc3QoKGk6IG51bWJlcikgPT4gZW1iZWQoc3BlYygndW5pdCcsIGksIHt0eXBlLCBmaWVsZHN9KSkpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjbGVhciBvdXQgdGhlIHN0b3JlJywgZnVuY3Rpb24oKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhpdHMucXFfY2xlYXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZW1iZWQoc3BlYygndW5pdCcsIGksIHt0eXBlfSkpO1xuICAgICAgICBsZXQgc3RvcmUgPSBicm93c2VyLmV4ZWN1dGUocHQoJ3FxJywgaSkpLnZhbHVlO1xuICAgICAgICBhc3NlcnQubGVuZ3RoT2Yoc3RvcmUsIDEpO1xuXG4gICAgICAgIHN0b3JlID0gYnJvd3Nlci5leGVjdXRlKHB0KCdxcV9jbGVhcicsIGkpKS52YWx1ZTtcbiAgICAgICAgYXNzZXJ0Lmxlbmd0aE9mKHN0b3JlLCAwKTtcbiAgICAgICAgdGVzdFJlbmRlcihgY2xlYXJfJHtpfWApO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IHNlbGVjdGluZyBiaW5zJywgZnVuY3Rpb24oKSB7XG4gICAgICBjb25zdCBlbmNvZGluZ3MgPSBbJ3gnLCAnY29sb3InLCAneSddO1xuICAgICAgY29uc3QgZmllbGRzID0gWydhJywgJ2MnLCAnYiddO1xuICAgICAgY29uc3QgdmFsdWVzID0gW1tbMSwgMl0sIDAsIFs0MCwgNTBdXSwgW1s4LCA5XSwgMSwgWzEwLCAyMF1dXTtcblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoaXRzLmJpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZW1iZWQoc3BlYygndW5pdCcsIGksIHt0eXBlLCBlbmNvZGluZ3N9LCB7eDoge2JpbjogdHJ1ZX0sIHk6IHtiaW46IHRydWV9fSkpO1xuICAgICAgICBjb25zdCBzdG9yZSA9IGJyb3dzZXIuZXhlY3V0ZShwdCgnYmlucycsIGkpKS52YWx1ZTtcbiAgICAgICAgYXNzZXJ0Lmxlbmd0aE9mKHN0b3JlLCAxKTtcbiAgICAgICAgYXNzZXJ0LnNhbWVNZW1iZXJzKHN0b3JlWzBdLmVuY29kaW5ncywgZW5jb2RpbmdzKTtcbiAgICAgICAgYXNzZXJ0LnNhbWVNZW1iZXJzKHN0b3JlWzBdLmZpZWxkcywgZmllbGRzKTtcbiAgICAgICAgYXNzZXJ0LnNhbWVEZWVwTWVtYmVycyhzdG9yZVswXS52YWx1ZXMsIHZhbHVlc1tpXSk7XG4gICAgICAgIGFzc2VydC5wcm9wZXJ0eShzdG9yZVswXSwgJ2Jpbl9hJyk7XG4gICAgICAgIGFzc2VydC5wcm9wZXJ0eShzdG9yZVswXSwgJ2Jpbl9iJyk7XG4gICAgICAgIGFzc2VydC5ub3RQcm9wZXJ0eShzdG9yZVswXSwgJ2Jpbl9jJyk7XG4gICAgICAgIHRlc3RSZW5kZXIoYGJpbnNfJHtpfWApO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19